# 邀請隊友功能使用指南

## 📋 功能概述

邀請隊友功能讓管理員可以生成邀請碼和邀請鏈接，方便邀請新成員加入團隊。

## 🎯 邀請碼的作用

1. **身份驗證**：確保只有知道邀請碼的人才能加入團隊
2. **團隊識別**：幫助區分不同的活動或團隊
3. **方便分享**：可以通過邀請碼或鏈接快速邀請成員

## 👨‍💼 對於管理員/團隊成員

### 1. 設定邀請碼

1. 以管理員身份登入
2. 前往「設定」頁面（底部導航欄）
3. 在「行程設定」區塊中找到「團隊邀請碼」
4. 輸入您想要的邀請碼（例如：`WL4SHOW`、`WULING2025` 等）
5. 點擊「儲存設定」

**注意**：
- 邀請碼不區分大小寫（`WL4SHOW` 和 `wl4show` 視為相同）
- 建議使用容易記憶的代碼（6-10 個字符）
- 避免使用特殊字符，建議只用字母和數字

### 2. 分享邀請

在首頁的「邀請隊友」區塊中，您可以：

#### 方式一：複製邀請碼
- 點擊「複製代碼」按鈕
- 會複製格式：`#WL4SHOW`
- 可以通過 LINE、WhatsApp、Email 等分享給朋友

#### 方式二：複製邀請鏈接
- 點擊鏈接旁邊的「複製」圖標
- 會複製完整鏈接：`https://your-domain.com/invite/WL4SHOW`
- 可以直接發送給朋友，點擊即可加入

#### 方式三：使用分享功能（手機）
- 如果瀏覽器支援，會顯示「分享」按鈕
- 點擊後可以使用系統分享功能（LINE、簡訊、Email 等）
- 會自動包含邀請碼和鏈接

## 👤 對於被邀請者

### 方式一：通過邀請鏈接加入（推薦）

1. **點擊邀請鏈接**
   - 收到邀請鏈接後，直接點擊
   - 鏈接格式：`https://your-domain.com/invite/WL4SHOW`

2. **自動驗證**
   - 系統會自動驗證邀請碼
   - 如果邀請碼有效，會顯示登入/註冊頁面

3. **登入或註冊**
   - 如果已有帳號：直接登入
   - 如果沒有帳號：點擊「註冊」創建新帳號
   - 填寫姓名、Email 和密碼

4. **加入成功**
   - 登入後會自動驗證邀請碼
   - 顯示「歡迎加入！」訊息
   - 點擊「開始使用」即可開始使用

### 方式二：手動輸入邀請碼

1. **訪問網站**
   - 打開應用程式首頁
   - 點擊「登入」或「註冊」

2. **輸入邀請碼**
   - 在登入/註冊頁面會顯示邀請碼輸入框
   - 輸入收到的邀請碼（例如：`WL4SHOW`）
   - 不區分大小寫

3. **完成註冊/登入**
   - 完成註冊或登入流程
   - 系統會自動驗證邀請碼

## 🔍 邀請碼驗證流程

```
用戶訪問 /invite/[code]
    ↓
系統讀取 trip_settings 表中的 invite_code
    ↓
比較 URL 中的 code 和資料庫中的 invite_code
    ↓
如果匹配 → 顯示登入/註冊頁面
如果不匹配 → 顯示「邀請碼無效」錯誤
    ↓
用戶登入/註冊後
    ↓
自動驗證邀請碼
    ↓
如果有效 → 顯示「歡迎加入！」並導向首頁
```

## 💡 使用場景範例

### 場景 1：LINE 群組邀請
1. 管理員在首頁複製邀請碼：`#WL4SHOW`
2. 在 LINE 群組中發送：「歡迎加入武陵四秀3日遊！邀請碼：WL4SHOW」
3. 成員複製邀請碼，訪問網站並輸入

### 場景 2：Email 邀請
1. 管理員複製邀請鏈接
2. 發送 Email：「點擊此鏈接加入：https://your-domain.com/invite/WL4SHOW」
3. 成員點擊鏈接，自動跳轉到登入/註冊頁面

### 場景 3：面對面邀請
1. 管理員打開首頁，展示邀請碼
2. 成員記下邀請碼（例如：`WL4SHOW`）
3. 回家後訪問網站，輸入邀請碼加入

## ⚠️ 注意事項

1. **邀請碼管理**
   - 只有管理員可以修改邀請碼
   - 修改後，舊的邀請鏈接會失效
   - 建議在活動開始前設定好邀請碼，避免頻繁更改

2. **安全性**
   - 邀請碼不應該公開分享在公開場合（如 Facebook 公開貼文）
   - 建議只分享給確定要參加的成員
   - 如果邀請碼洩露，管理員可以更改邀請碼

3. **邀請碼格式**
   - 建議使用 6-10 個字符
   - 可以使用字母和數字
   - 不區分大小寫
   - 避免使用特殊字符（可能導致 URL 問題）

## 🔧 技術細節

- **邀請碼存儲**：`trip_settings` 表的 `invite_code` 欄位
- **邀請鏈接格式**：`/invite/[code]`
- **驗證邏輯**：不區分大小寫比較
- **權限**：所有人都可以查看邀請碼，但只有管理員可以修改

## 📱 移動設備支援

- ✅ 支援複製到剪貼板
- ✅ 支援 Web Share API（iOS Safari、Chrome Android）
- ✅ 響應式設計，手機上也能輕鬆使用

## 🆘 常見問題

### Q: 邀請碼無效怎麼辦？
A: 請確認：
1. 邀請碼是否正確（注意大小寫不影響）
2. 管理員是否更改了邀請碼
3. 聯繫管理員獲取最新的邀請碼

### Q: 可以有多個邀請碼嗎？
A: 目前系統只支援一個邀請碼。如果需要多個，可以：
1. 使用不同的邀請碼輪流使用
2. 或者聯繫開發者添加多邀請碼功能

### Q: 邀請碼會過期嗎？
A: 目前邀請碼不會自動過期，但管理員可以隨時更改。

### Q: 已經登入的用戶訪問邀請鏈接會怎樣？
A: 如果已登入且邀請碼有效，會直接顯示「歡迎加入！」訊息。

